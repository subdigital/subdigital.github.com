
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Fickle Bits</title>
  <meta name="author" content="Ben Scheirman">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  

  <link rel="canonical" href="http://benscheirman.com/blog/page/26/index.html"/>
  <link href="/favicon.png" rel="shortcut icon" />
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="http://s3.amazonaws.com/ender-js/jeesh.min.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="http://feeds.feedburner.com/ficklebits" rel="alternate" title="Fickle Bits" type="application/atom+xml"/>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-210379-10']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


  
  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>


  
  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>


  <!--Fonts from Google's Web font directory at http://google.com/webfonts -->
<link href='http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic' rel='stylesheet' type='text/css'>

</head>

<body  >
  <header><hgroup>
  <h1><a href="/">Fickle Bits</a></h1>
  
    <h2>You're doing it wrong.</h2>
  
</hgroup>

</header>
  <nav role=navigation><ul role=subscription data-subscription="rss">
  <li><a href="http://feeds.feedburner.com/ficklebits" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
<form action="http://google.com/search" method="get">
  <fieldset role="site-search">
    <input type="hidden" name="q" value="site:benscheirman.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
<ul role=main-navigation>
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">



  <article>
    
  <header>
    
      <h1 class="entry-title"><a href="/blog/2007/04/review-agile-principles-patterns-and-practices-in-c/">Review - Agile Principles, Patterns, and Practices in C#</a></h1>
    
    
      <p class="meta">




<time datetime="2007-04-19 00:00:00 -0500" pubdate  updated >Apr 19<span>th</span>, 2007</time>


</p>
    
  </header>


  <div class="entry-content"><div dir="ltr"><font face="Trebuchet MS" color="#000000" size="2"><font color="#0066cc"><a href="http://www.amazon.com/Principles-Patterns-Practices-Robert-Martin/dp/0131857258"><img alt="" src="http://ec2.images-amazon.com/images/P/0131857258.01._SCLZZZZZZZ_V46809707_AA240_.jpg" align="left" border="0" /></font></a>Robert Martin has a great book here.&nbsp; I just finished reading Agile Principle, Patterns, and Practices in C# (what a mouthful!).&nbsp; </font></div>


<div dir="ltr"><font face="Trebuchet MS" size="2"></font>&nbsp;</div>


<div dir="ltr"><font face="Trebuchet MS" size="2">In this book you get a fantastic play-by-play of a typical TDD/pairing session, which I think is a great way to demonstrate the process.&nbsp; </font></div>


<div dir="ltr"><font face="Trebuchet MS" size="2"></font>&nbsp;</div>


<div dir="ltr"><font face="Trebuchet MS" size="2">This was also the book that really got me to appreciate UML for what it is.&nbsp; I&#8217;m typically the guy who knows the UML basic shapes, and draws a bunch of interconnected rectangles on a whiteboard to help me solve problems.&nbsp; I was never a &#8220;fan&#8221; of UML because I always associated it with the monolithic CASE tools that use UML as the source for an architecture, and out spits generated code.&nbsp; </font><font face="Trebuchet MS" size="2">The book described what Martin feels are the essential (read: useful)&nbsp;components of UML and really abandons the rest.&nbsp; He emphasizes throwing away your diagrams when you&#8217;re done and encourages writing them on a napkin or a whiteboard, which is infinitely faster than, say, Visio.</font></div>


<div dir="ltr"><font face="Trebuchet MS" size="2"></font>&nbsp;</div>


<div dir="ltr"><font face="Trebuchet MS" size="2">The section on patterns is well written, and it is always nice to get refreshers on patterns that you might not know about&nbsp;or haven&#8217;t used recently.&nbsp; Again he emphasizes not to go crazy with patterns.&nbsp; They are there when they help, but don&#8217;t be shy about throwing them out when they complicate things.&nbsp; Indeed, this book is agile.</font></div>


<div dir="ltr"><font face="Trebuchet MS" size="2"></font>&nbsp;</div>


<div dir="ltr"><font face="Trebuchet MS" size="2">The final section (or rather 1/3 of the book!) goes about a payroll system.&nbsp; He does a bit of UML to get the basic idea in his head and then he goes straight to the tests.&nbsp; He fleshes out the entire thing, right there in the text.&nbsp; The model changes, the tests drive the design and behavior, and he frequently consults with his &#8220;Customer&#8221; (himself) over what the requirements are.&nbsp; After he has a working model that is fully tested, he bolts on persistence using a custom ADO.NET pproach, which is difficult.&nbsp; Seeing him do this reminds me of how I like to use NHibernate, but I found it difficult to repeat this approach using flat ADO.NET calls. </font></div>


<div dir="ltr"><font face="Trebuchet MS" size="2"></font>&nbsp;</div>


<div dir="ltr"><font face="Trebuchet MS" size="2">I&#8217;m thoroughly impressed with this book.&nbsp; If any of the topics above interest you, then <a title="amazon" href="http://www.amazon.com/Principles-Patterns-Practices-Robert-Martin/dp/0131857258" target="_blank">go pick it up</a>!</font></div>

</div>
  <footer>
    <a rel="full-article" href="/blog/2007/04/review-agile-principles-patterns-and-practices-in-c/">Read on &rarr;</a>
  </footer>


  </article>


  <article>
    
  <header>
    
      <h1 class="entry-title"><a href="/blog/2007/04/targetprocess-first-impressions-are-everything/">TargetProcess - First Impressions Are Everything</a></h1>
    
    
      <p class="meta">




<time datetime="2007-04-18 00:00:00 -0500" pubdate  updated >Apr 18<span>th</span>, 2007</time>


</p>
    
  </header>


  <div class="entry-content"><div lang="EN-US" vlink="purple" link="blue"><div><p><font face="Arial" size="2"><span style="FONT-SIZE: 10pt; FONT-FAMILY: Arial">I ran across a link to <a href="http://www.targetprocess.com/" target="_blank">TargetProcess </a>today and I thought I&rsquo;d check it out.&nbsp; All I knew about it was that it is some kind of &ldquo;agile tool.&rdquo;</span></font></p><p><font face="Arial" size="2"><span style="FONT-SIZE: 10pt; FONT-FAMILY: Arial"></span></font></p><p><font face="Arial" size="2"><span style="FONT-SIZE: 10pt; FONT-FAMILY: Arial">I visit the website and it looks promising.&nbsp; Clean graphics, simple usable navigation:</span></font></p><p><font face="Arial" size="2"><span style="FONT-SIZE: 10pt; FONT-FAMILY: Arial"></span></font></p><p><font face="Arial" size="2"><span style="FONT-SIZE: 10pt; FONT-FAMILY: Arial"><a href="http://www.flux88.com/CropperCapture[1].jpg"></a></span></font></p><p><font face="Arial" size="2"><span style="FONT-SIZE: 10pt; FONT-FAMILY: Arial"></span></font></p><p><font face="Arial" size="2"><span style="FONT-SIZE: 10pt; FONT-FAMILY: Arial"><img src="/images/CropperCapture%5B1%5D_small_.jpg" alt="Team Proces Home page"  border="1"  />All I want to do is see what it is, what it looks like, and whether I think that it&rsquo;s worth investigating further.&nbsp; With my typical attention span, a given product better impress me within 15-30 seconds, otherwise I&rsquo;m off to do something more productive.&nbsp; First impressions are everything.&nbsp; The last thing you want to do is waste a potential customer&rsquo;s time.</span></font></p><p><font face="Arial" size="2"><span style="FONT-SIZE: 10pt; FONT-FAMILY: Arial">&nbsp;</span></font></p><p><font face="Arial" size="2"><span style="FONT-SIZE: 10pt; FONT-FAMILY: Arial">So I click on <b><span style="FONT-WEIGHT: bold">See</span></b>.&nbsp; I&rsquo;d rather see some screenshots than try a demo.&nbsp; The first option on that small page is <b><span style="FONT-WEIGHT: bold">Try the Demo</span></b>.&nbsp; Umm, okay I&rsquo;ll try the demo then.&nbsp; The demo page says that any username and password will work.&nbsp; Great, that will save me time and not get in my way.&nbsp; I click on the demo.</span></font></p><p><font face="Arial" size="2"><span style="FONT-SIZE: 10pt; FONT-FAMILY: Arial">&nbsp;</span></font><font face="Arial" size="2"><span style="FONT-SIZE: 10pt; FONT-FAMILY: Arial">It asks me to submit my name, company, and email address.&nbsp; I enter in random garbage.&nbsp; (At this point they don&rsquo;t deserve my info because I don&rsquo;t know yet if I&rsquo;m interested!&nbsp; I can understand that they want some usage information and the ability to generate leads, but come on!&nbsp; Wait until I&rsquo;m excited first!).&nbsp; The email address needs to be validated.&nbsp; I change <b><span style="FONT-WEIGHT: bold">asdf</span></b> to <b><span style="FONT-WEIGHT: bold"><a onclick="return top.js.OpenExtLink(window,event,this)" href="mailto:asdf@aol.com" target="_blank">asdf@aol.com</a></span></b>.</span></font></p><p><font face="Arial" size="2"><span style="FONT-SIZE: 10pt; FONT-FAMILY: Arial">&nbsp;</span></font><font face="Arial" size="2"><span style="FONT-SIZE: 10pt; FONT-FAMILY: Arial">Ah, finally the demo (1 minute 30 seconds after I initially viewed their page).&nbsp; I try to login with my standard set of credentials:&nbsp; asdf/asdf.</span></font></p><p><font face="Arial" size="2"><span style="FONT-SIZE: 10pt; FONT-FAMILY: Arial">&nbsp;</span></font><b><font face="Arial" size="2"><span style="FONT-WEIGHT: bold; FONT-SIZE: 10pt; FONT-FAMILY: Arial">ERROR.</span></font></b></p><p><b><font face="Arial" size="2"><span style="FONT-WEIGHT: bold; FONT-SIZE: 10pt; FONT-FAMILY: Arial">&nbsp;</span></font></b><font face="Arial" size="2"><span style="FONT-SIZE: 10pt; FONT-FAMILY: Arial">&nbsp;<img src="/images/CropperCapture%5B2%5D_small_.jpg" alt="error logging in"  border="1"  /></span></font></p><p><font face="Arial" size="2"><span style="FONT-SIZE: 10pt; FONT-FAMILY: Arial">Hrm, and exception was thrown while logging in.&nbsp; Not a good sign.&nbsp; At least they were nice enough to let me notify them without opening my email client.&nbsp; I click on the <b><span style="FONT-WEIGHT: bold">Notify Support</span></b> button.</span></font></p><p><font face="Arial" size="2"><span style="FONT-SIZE: 10pt; FONT-FAMILY: Arial"></span></font></p><p><b><font face="Arial" size="2"><span style="FONT-WEIGHT: bold; FONT-SIZE: 10pt; FONT-FAMILY: Arial">ERROR.</span></font></b></p><p><b><font face="Arial" size="2"><span style="FONT-WEIGHT: bold; FONT-SIZE: 10pt; FONT-FAMILY: Arial"></span></font></b></p><p><font face="Arial" size="2"><span style="FONT-SIZE: 10pt; FONT-FAMILY: Arial"><img src="/images/CropperCapture%5B3%5D_small_.jpg" alt="Error sending email."  border="1"  />&nbsp;</span></font></p><p><font face="Arial" size="2"><span style="FONT-SIZE: 10pt; FONT-FAMILY: Arial">At this point I am thoroughly annoyed.&nbsp; I have wasted about 3 minutes (now more like 10 since I felt the need to write this blog post </span></font><font face="Wingdings" size="2"><span style="FONT-SIZE: 10pt; FONT-FAMILY: Wingdings">J</span></font><font face="Arial" size="2"><span style="FONT-SIZE: 10pt; FONT-FAMILY: Arial"> ).</span></font></p><p><font face="Arial" size="2"><span style="FONT-SIZE: 10pt; FONT-FAMILY: Arial">&nbsp;</span></font><font face="Arial" size="2"><span style="FONT-SIZE: 10pt; FONT-FAMILY: Arial">I eventually went back and looked at the screenshots and ended up a little intrigued.&nbsp; I saw what the app looks like, I saw how it allows me to manage an agile project and collect the information and display the metrics I am likely to care about.&nbsp; Really the screenshots were their best sales tactic, not the online demo.</span></font></p><p><font face="Arial" size="2"><span style="FONT-SIZE: 10pt; FONT-FAMILY: Arial">&nbsp;</span></font><font face="Arial" size="2"><span style="FONT-SIZE: 10pt; FONT-FAMILY: Arial">Hopefully they will fix this soon so that other potential buyers won&rsquo;t shy away from their product too early.&nbsp; It would be a shame because it looks like a useful tool.</span></font></p><p><font face="Arial" size="2"><span style="FONT-SIZE: 10pt; FONT-FAMILY: Arial">&nbsp;</span></font><font face="Arial" size="2"><span style="FONT-SIZE: 10pt; FONT-FAMILY: Arial">The bottom line:&nbsp; <b><span style="FONT-WEIGHT: bold">Your customers are impatient.&nbsp; Don&rsquo;t waste their time.&nbsp; Don&rsquo;t shoot yourself in the foot with a live demo if the live demo doesn&rsquo;t work.</span></b></span></font></p><p><font face="Arial" size="2"><span style="FONT-SIZE: 10pt; FONT-FAMILY: Arial"><span style="FONT-WEIGHT: bold"><em>UPDATE:&nbsp; I was able to figure out from the error that the issue is a unique value violation.&nbsp; Apparently a lot of people type in a username of &lsquo;asdf.&rsquo;&nbsp; Type in a unique name and it will work.</em></span></span></font></p><p><font face="Arial" size="2"><span style="FONT-SIZE: 10pt; FONT-FAMILY: Arial"><span style="FONT-WEIGHT: bold"></span></span></font>&nbsp;</p></div></div>

</div>
  <footer>
    <a rel="full-article" href="/blog/2007/04/targetprocess-first-impressions-are-everything/">Read on &rarr;</a>
  </footer>


  </article>


  <article>
    
  <header>
    
      <h1 class="entry-title"><a href="/blog/2007/04/my-presentation-on-orm-with-nhibernate/">My Presentation on ORM With NHibernate</a></h1>
    
    
      <p class="meta">




<time datetime="2007-04-11 00:00:00 -0500" pubdate  updated >Apr 11<span>th</span>, 2007</time>


</p>
    
  </header>


  <div class="entry-content"><p>A couple of weeks ago I gave a presentation on Object Relational Mapping with NHibernate.</p>


<p>We talked about:</p>


<ul><li>Basic Concepts</li><li>Getting Started, watching what SQL gets generated for various actions</li><li>Architecture, querying, etc</li><li>A live Blog example done with TDD</li></ul>


<p>A number of people came and watched me drown in code, but I think all-in-all it was a good time and I think I conveyed a lot of information in a small time-frame.</p>


<p>Anyway, I recorded the presentation.&nbsp; You can download it below.&nbsp; You will need the <a title="Camtasia's video codec download" href="http://www.techsmith.com/download/codecs.asp" target="_blank">TechSmith Video Codec</a> to view it.</p>


<p>A few times I was asked questions by the audience and I didn&rsquo;t repeat the question, so hopefully you will be able to infer a bit.&nbsp; </p>


<p>I&rsquo;d appreciate your feedback if you watch it, it&rsquo;s about 1 hour and 45 minutes (ouch!).</p>


<p><a href="http://www.flux88.com/uploads/ORMWithNHibernateScreenCast.wmv" target="_blank">File Attachment: ORMWithNHibernateScreenCast.wmv (64824 KB)</a></p>


<p>&nbsp;</p>

</div>
  <footer>
    <a rel="full-article" href="/blog/2007/04/my-presentation-on-orm-with-nhibernate/">Read on &rarr;</a>
  </footer>


  </article>


  <article>
    
  <header>
    
      <h1 class="entry-title"><a href="/blog/2007/04/billy-does-it-again-with-nhibernate-best-practices/">Billy Does It Again With NHibernate Best Practices</a></h1>
    
    
      <p class="meta">




<time datetime="2007-04-04 00:00:00 -0500" pubdate  updated >Apr 4<span>th</span>, 2007</time>


</p>
    
  </header>


  <div class="entry-content"><p>If you&rsquo;re interested in NHibernate, or are already using it then run over to Code Project and check out Billy McCafferty&rsquo;s&nbsp;updated article on <a title="code project" href="http://www.codeproject.com/aspnet/NHibernateBestPractices.asp" target="_blank">NHibernate Best Practices with ASP.NET</a>&nbsp;(1.2).</p>


<p>Billy hits the nail on the head with a number of issues and is able to address &ldquo;real&rdquo; development topics in depth.&nbsp; He obviously knows his stuff.</p>

</div>
  <footer>
    <a rel="full-article" href="/blog/2007/04/billy-does-it-again-with-nhibernate-best-practices/">Read on &rarr;</a>
  </footer>


  </article>


  <article>
    
  <header>
    
      <h1 class="entry-title"><a href="/blog/2007/03/writing-a-simple-image-editor-in-cab-part-4/">Writing a Simple Image Editor in CAB - Part 4</a></h1>
    
    
      <p class="meta">




<time datetime="2007-03-15 00:00:00 -0500" pubdate  updated >Mar 15<span>th</span>, 2007</time>


</p>
    
  </header>


  <div class="entry-content"><p>In today&rsquo;s installment we&rsquo;ll continue <a title="Part 3" href="http://www.flux88.com/2007/03/13/Writing+A+Simple+Image+Editor+In+CAB++Part+3.aspx">where we left off</a> and add the functionality to apply image filters.</p>


<p>In order to do this, let&rsquo;s take a step back and think about how we want to accomplish this.&nbsp; I&rsquo;m imagining two use cases:</p>


<ul><li>Load filters from dynamic assemblies</li><li>Apply a filter to the image</li></ul>


<p>To load the filters, I&rsquo;ll have a separate assembly implement a specific interface, then they will be loaded from a directory and placed in the menu.</p>


<p>First, our core interface:</p>


<div style="FONT-SIZE: 8pt; BACKGROUND: white; COLOR: black; FONT-FAMILY: Consolas"><p style="MARGIN: 0px"><span style="COLOR: blue">using</span> System;</p><p style="MARGIN: 0px"><span style="COLOR: blue">using</span> System.Drawing;</p><p style="MARGIN: 0px">&nbsp;</p><p style="MARGIN: 0px"><span style="COLOR: blue">namespace</span> ImageFiltering</p><p style="MARGIN: 0px">{</p><p style="MARGIN: 0px">&nbsp; &nbsp; <span style="COLOR: blue">public</span> <span style="COLOR: blue">interface</span> <span style="COLOR: teal">IImageFilter</span></p><p style="MARGIN: 0px">&nbsp; &nbsp; {</p><p style="MARGIN: 0px">&nbsp; &nbsp; &nbsp; &nbsp; <span style="COLOR: blue">string</span> Name { <span style="COLOR: blue">get</span>; }</p><p style="MARGIN: 0px">&nbsp; &nbsp; &nbsp; &nbsp; <span style="COLOR: teal">Bitmap</span> Filter(<span style="COLOR: teal">Bitmap</span> source);</p><p style="MARGIN: 0px">&nbsp; &nbsp; }</p><p style="MARGIN: 0px">}</p></div>


<!--EndFragment-->


<p>The name property determines what will be displayed on the menu.&nbsp; The Filter method is, as they say on MTV Cribs, &ldquo;where the magic happens.&rdquo;</p>


<p>I&rsquo;ll implement some basic image filters in a bit.&nbsp; Since both of these use cases are related, I can package them up in the same module.&nbsp; I create a module called <em>ImageFiltering.</em></p>


<p>The first workitem is going to be the LoadFiltersWorkItem.&nbsp; It will run at startup and read up the assemblies and obtain a list of IImageFilter implementations:</p>


<div style="FONT-SIZE: 8pt; BACKGROUND: white; COLOR: black; FONT-FAMILY: Consolas"><p style="MARGIN: 0px"><span style="COLOR: blue">private</span> <span style="COLOR: teal">UIExtensionSite</span> GetMainMenu()</p><p style="MARGIN: 0px">{</p><p style="MARGIN: 0px">&nbsp; &nbsp; <span style="COLOR: green">//return the well known ui extension site for the main menu</span></p><p style="MARGIN: 0px">&nbsp; &nbsp; <span style="COLOR: blue">return</span> RootWorkItem.UIExtensionSites[<span style="COLOR: maroon">&#8220;MainMenuStrip&#8221;</span>];</p><p style="MARGIN: 0px">}</p><p style="MARGIN: 0px">&nbsp;</p><p style="MARGIN: 0px"><span style="COLOR: blue">protected</span> <span style="COLOR: blue">override</span> <span style="COLOR: blue">void</span> OnRunStarted()</p><p style="MARGIN: 0px">{</p><p style="MARGIN: 0px">&nbsp; &nbsp; <span style="COLOR: blue">base</span>.OnRunStarted();</p><p style="MARGIN: 0px">&nbsp;</p><p style="MARGIN: 0px">&nbsp; &nbsp; <span style="COLOR: green">//get the menu strip</span></p><p style="MARGIN: 0px">&nbsp; &nbsp; <span style="COLOR: teal">UIExtensionSite</span> site = GetMainMenu();</p><p style="MARGIN: 0px">&nbsp;</p><p style="MARGIN: 0px">&nbsp; &nbsp; <span style="COLOR: green">//create the new menu item</span></p><p style="MARGIN: 0px">&nbsp; &nbsp; <span style="COLOR: teal">ToolStripMenuItem</span> filterMenu = <span style="COLOR: blue">new</span> <span style="COLOR: teal">ToolStripMenuItem</span>();</p><p style="MARGIN: 0px">&nbsp; &nbsp; filterMenu.Text = <span style="COLOR: maroon">&#8220;Filters&#8221;</span>;</p><p style="MARGIN: 0px">&nbsp;</p><p style="MARGIN: 0px">&nbsp; &nbsp; <span style="COLOR: green">//load the filters</span></p><p style="MARGIN: 0px">&nbsp; &nbsp; LoadFiltersFromDirectory(filterMenu);</p><p style="MARGIN: 0px">&nbsp;</p><p style="MARGIN: 0px">&nbsp; &nbsp; <span style="COLOR: green">//add the filters menu to the site</span></p><p style="MARGIN: 0px">&nbsp; &nbsp; site.Add&lt;<span style="COLOR: teal">ToolStripMenuItem</span>&gt;(filterMenu);</p><p style="MARGIN: 0px">}</p></div>


<!--EndFragment-->


<p>The LoadFiltesrFromDirectory(filterMenu) method basically uses reflection to pull out all of the assemblies in the /filters directory of our application.&nbsp; The details of this aren&rsquo;t important here, but if you want to see it you can download the project at the end of today&rsquo;s article.</p>


<p>Since this needs to run when the application starts up, we code that up in the Module Init class:</p>


<div style="FONT-SIZE: 8pt; BACKGROUND: white; COLOR: black; FONT-FAMILY: Consolas"><p style="MARGIN: 0px"><span style="COLOR: blue">public</span> <span style="COLOR: blue">class</span> <span style="COLOR: teal">ImageFilteringModuleInit</span> : <span style="COLOR: teal">ModuleInit</span></p><p style="MARGIN: 0px">{</p><p style="MARGIN: 0px">&nbsp; &nbsp; <span style="COLOR: blue">private</span> <span style="COLOR: teal">WorkItem</span> _rootWorkItem;</p><p style="MARGIN: 0px">&nbsp; &nbsp; [<span style="COLOR: teal">ServiceDependency</span>]</p><p style="MARGIN: 0px">&nbsp; &nbsp; <span style="COLOR: blue">public</span> <span style="COLOR: teal">WorkItem</span> RootWorkItem</p><p style="MARGIN: 0px">&nbsp; &nbsp; {</p><p style="MARGIN: 0px">&nbsp; &nbsp; &nbsp; &nbsp; <span style="COLOR: blue">get</span> { <span style="COLOR: blue">return</span> _rootWorkItem; }</p><p style="MARGIN: 0px">&nbsp; &nbsp; &nbsp; &nbsp; <span style="COLOR: blue">set</span> { _rootWorkItem = <span style="COLOR: blue">value</span>; }</p><p style="MARGIN: 0px">&nbsp; &nbsp; }</p><p style="MARGIN: 0px">&nbsp;</p><p style="MARGIN: 0px">&nbsp; &nbsp; <span style="COLOR: blue">private</span> <span style="COLOR: teal">LoadFiltersWorkItem</span> _loadFiltersWorkItem;</p><p style="MARGIN: 0px">&nbsp;</p><p style="MARGIN: 0px">&nbsp; &nbsp; <span style="COLOR: blue">public</span> <span style="COLOR: blue">override</span> <span style="COLOR: blue">void</span> Load()</p><p style="MARGIN: 0px">&nbsp; &nbsp; {</p><p style="MARGIN: 0px">&nbsp; &nbsp; &nbsp; &nbsp; <span style="COLOR: blue">base</span>.Load();</p><p style="MARGIN: 0px">&nbsp;</p><p style="MARGIN: 0px">&nbsp; &nbsp; &nbsp; &nbsp; <span style="COLOR: green">//load up our work items</span></p><p style="MARGIN: 0px">&nbsp; &nbsp; &nbsp; &nbsp; _loadFiltersWorkItem = <span style="COLOR: blue">this</span>.RootWorkItem.WorkItems.AddNew&lt;<span style="COLOR: teal">LoadFiltersWorkItem</span>&gt;(<span style="COLOR: maroon">&#8220;LoadFiltersWorkItem&#8221;</span>);</p><p style="MARGIN: 0px">&nbsp; &nbsp; &nbsp; &nbsp; _loadFiltersWorkItem.Run();</p><p style="MARGIN: 0px">&nbsp; &nbsp; }&nbsp;</p><p style="MARGIN: 0px">}</p></div>


<!--EndFragment-->


<p>This is pretty basic Module Init stuff.&nbsp; Create the work item and run it.&nbsp; Assuming we&rsquo;ve already created some filters and placed the dll inside of the filters directory, we should be able to run the application and see the filters loaded in the menu.</p>


<p><img src="/images/CropperCapture%5B51%5D_.jpg" alt="Our filters have been loaded"  border="1"  /></p>


<p>Notice how I initially set the menu items to be <em>disabled</em>.&nbsp; This is because no image has been loaded yet!&nbsp; We already have an event being raise when the image is loaded, so I handle that in the LoadFiltersWorkItem and enable the menu items:</p>


<div style="FONT-SIZE: 8pt; BACKGROUND: white; COLOR: black; FONT-FAMILY: Consolas"><p style="MARGIN: 0px">[<span style="COLOR: teal">EventSubscription</span>(<span style="COLOR: maroon">&#8220;topic://ImageEditor/ImageDisplayModule/ImageLoaded&#8221;</span>, <span style="COLOR: teal">ThreadOption</span>.UserInterface)]</p><p style="MARGIN: 0px"><span style="COLOR: blue">public</span> <span style="COLOR: blue">void</span> OnImageSelected(<span style="COLOR: blue">object</span> sender, <span style="COLOR: teal">DataEventArgs</span>&lt;<span style="COLOR: teal">Bitmap</span>&gt; e)</p><p style="MARGIN: 0px">{</p><p style="MARGIN: 0px">&nbsp; &nbsp; _image = e.Data;</p
><p style="MARGIN: 0px">&nbsp; &nbsp; <span style="COLOR: blue">foreach</span> (<span style="COLOR: teal">ToolStripMenuItem</span> filterItem <span style="COLOR: blue">in</span> _filterItems)</p><p style="MARGIN: 0px">&nbsp; &nbsp; {</p><p style="MARGIN: 0px">&nbsp; &nbsp; &nbsp; &nbsp; filterItem.Enabled = <span style="COLOR: blue">true</span>;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </p><p style="MARGIN: 0px">&nbsp; &nbsp; }</p><p style="MARGIN: 0px">}</p></div>


<p>Attached to the <em>Tag</em> property of each of these menu items is the concrete filter that we dynamically loaded.&nbsp; The next step is to raise an event when the filter is clicked, so that the other work item (that we&rsquo;re about to create) can apply the filter.</p>


<p>As I create each of the menu items, I wire up the click event to call this handler:</p>


<div style="FONT-SIZE: 8pt; BACKGROUND: white; COLOR: black; FONT-FAMILY: Consolas"><p style="MARGIN: 0px"><span style="COLOR: blue">void</span> filterItem_Click(<span style="COLOR: blue">object</span> sender, <span style="COLOR: teal">EventArgs</span> e)</p><p style="MARGIN: 0px">{</p><p style="MARGIN: 0px">&nbsp; &nbsp; <span style="COLOR: teal">ToolStripMenuItem</span> menuItem = sender <span style="COLOR: blue">as</span> <span style="COLOR: teal">ToolStripMenuItem</span>;</p><p style="MARGIN: 0px">&nbsp; &nbsp; <span style="COLOR: teal">IImageFilter</span> filter = menuItem.Tag <span style="COLOR: blue">as</span> <span style="COLOR: teal">IImageFilter</span>;</p><p style="MARGIN: 0px">&nbsp;</p><p style="MARGIN: 0px">&nbsp; &nbsp; <span style="COLOR: blue">if</span> (FilterSelected != <span style="COLOR: blue">null</span>)</p><p style="MARGIN: 0px">&nbsp; &nbsp; {</p><p style="MARGIN: 0px">&nbsp; &nbsp; &nbsp; &nbsp; <span style="COLOR: teal">DataEventArgs</span>&lt;<span style="COLOR: teal">IImageFilter</span>&gt; args = <span style="COLOR: blue">new</span> <span style="COLOR: teal">DataEventArgs</span>&lt;<span style="COLOR: teal">IImageFilter</span>&gt;(filter);</p><p style="MARGIN: 0px">&nbsp; &nbsp; &nbsp; &nbsp; FilterSelected(<span style="COLOR: blue">this</span>, args);</p><p style="MARGIN: 0px">&nbsp; &nbsp; }</p><p style="MARGIN: 0px">}</p></div>


<!--EndFragment-->


<p>The event is raised with the concrete filter passed along as data event args.</p>


<p>The next work item doesn&rsquo;t get created at start up.&nbsp; It begins when the user clicks the menu item.&nbsp; So when/where do we kick off the work item?&nbsp; We handle the FilterSelected event (that is being published as a CAB event) in our module, and create the workitem there:</p>


<div style="FONT-SIZE: 8pt; BACKGROUND: white; COLOR: black; FONT-FAMILY: Consolas"><p style="MARGIN: 0px">&nbsp;[<span style="COLOR: teal">EventSubscription</span>(<span style="COLOR: teal">ModuleConstants</span>.<span style="COLOR: teal">Events</span>.FilterSelected, <span style="COLOR: teal">ThreadOption</span>.UserInterface)]</p><p style="MARGIN: 0px">&nbsp;<span style="COLOR: blue">public</span> <span style="COLOR: blue">void</span> OnFilterSelected(<span style="COLOR: blue">object</span> sender, <span style="COLOR: teal">DataEventArgs</span>&lt;<span style="COLOR: teal">IImageFilter</span>&gt; e)</p><p style="MARGIN: 0px">&nbsp;{</p><p style="MARGIN: 0px">&nbsp; &nbsp; <span style="COLOR: green">//get the current image</span></p><p style="MARGIN: 0px">&nbsp; &nbsp; <span style="COLOR: teal">Bitmap</span> image = _loadFiltersWorkItem.Image; </p><p style="MARGIN: 0px">&nbsp;</p><p style="MARGIN: 0px">&nbsp; &nbsp; <span style="COLOR: green">//create a new workitem to apply the filter&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span></p><p style="MARGIN: 0px">&nbsp; &nbsp; <span style="COLOR: teal">WorkItem</span> wi = <span style="COLOR: blue">new</span> <span style="COLOR: teal">FilterImageWorkItem</span>(e.Data, image);</p><p style="MARGIN: 0px">&nbsp; &nbsp; <span style="COLOR: blue">this</span>.RootWorkItem.WorkItems.Add(wi);</p><p style="MARGIN: 0px">&nbsp;</p><p style="MARGIN: 0px">&nbsp; &nbsp; wi.Run();</p><p style="MARGIN: 0px">&nbsp;}</p></div>


<!--EndFragment-->


<p>We have to get a handle on the current image as well as the filter, and this proved to be a bit difficult.&nbsp; I&rsquo;d like to have some sort of global state (and maybe I&rsquo;m missing something) but the State property is WorkItem specific.&nbsp; I was already handling the ImageLoaded event in the LoadFiltersWorkItem, so I snag the image from that event and hang on to it.&nbsp; The module reads this and passes it to the FilterImageWorkItem.&nbsp; Until I can figure out a cleaner way to do this, it will have to stay for now.</p>


<p>Here&rsquo;s the FilterImageWorkItem:</p>


<div style="FONT-SIZE: 8pt; BACKGROUND: white; COLOR: black; FONT-FAMILY: Consolas"><p style="MARGIN: 0px"><span style="COLOR: blue">public</span> <span style="COLOR: blue">class</span> <span style="COLOR: teal">FilterImageWorkItem</span> : <span style="COLOR: teal">WorkItem</span></p><p style="MARGIN: 0px">{</p><p style="MARGIN: 0px">&nbsp; &nbsp; <span style="COLOR: blue">private</span> <span style="COLOR: teal">IImageFilter</span> _filter;</p><p style="MARGIN: 0px">&nbsp; &nbsp; <span style="COLOR: blue">private</span> <span style="COLOR: teal">Bitmap</span> _image;</p><p style="MARGIN: 0px">&nbsp;</p><p style="MARGIN: 0px">&nbsp; &nbsp; [<span style="COLOR: teal">EventPublication</span>(<span style="COLOR: teal">ModuleConstants</span>.<span style="COLOR: teal">Events</span>.ImageLoaded, <span style="COLOR: teal">PublicationScope</span>.Global)]</p><p style="MARGIN: 0px">&nbsp; &nbsp; <span style="COLOR: blue">public</span> <span style="COLOR: blue">event</span> <span style="COLOR: teal">EventHandler</span>&lt;<span style="COLOR: teal">DataEventArgs</span>&lt;<span style="COLOR: teal">Bitmap</span>&gt;&gt; ImageLoaded;</p><p style="MARGIN: 0px">&nbsp;</p><p style="MARGIN: 0px">&nbsp; &nbsp; <span style="COLOR: blue">public</span> FilterImageWorkItem(<span style="COLOR: teal">IImageFilter</span> filter, <span style="COLOR: teal">Bitmap</span> image)</p><p style="MARGIN: 0px">&nbsp; &nbsp; {</p><p style="MARGIN: 0px">&nbsp; &nbsp; &nbsp; &nbsp; _filter = filter;</p><p style="MARGIN: 0px">&nbsp; &nbsp; &nbsp; &nbsp; _image = image;</p><p style="MARGIN: 0px">&nbsp; &nbsp; }&nbsp; &nbsp; </p><p style="MARGIN: 0px">&nbsp;</p><p style="MARGIN: 0px">&nbsp; &nbsp; <span style="COLOR: blue">protected</span> <span style="COLOR: blue">override</span> <span style="COLOR: blue">void</span> OnRunStarted()</p><p style="MARGIN: 0px">&nbsp; &nbsp; {</p><p style="MARGIN: 0px">&nbsp; &nbsp; &nbsp; &nbsp; <span style="COLOR: blue">base</span>.OnRunStarted();</p><p style="MARGIN: 0px">&nbsp;</p><p style="MARGIN: 0px">&nbsp; &nbsp; &nbsp; &nbsp; <span style="COLOR: teal">Bitmap</span> newImage = _filter.Filter(_image);</p><p style="MARGIN: 0px">&nbsp; &nbsp; &nbsp; &nbsp; <span style="COLOR: blue">if</span> (ImageLoaded != <span style="COLOR: blue">null</span>)</p><p style="MARGIN: 0px">&nbsp; &nbsp; &nbsp; &nbsp; {</p><p style="MARGIN: 0px">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ImageLoaded(<span style="COLOR: blue">this</span>, <span style="COLOR: blue">new</span> <span style="COLOR: teal">DataEventArgs</span>&lt;<span style="COLOR: teal">Bitmap</span>&gt;(newImage));</p><p style="MARGIN: 0px">&nbsp; &nbsp; &nbsp; &nbsp; }</p><p style="MARGIN: 0px">&nbsp; &nbsp; }</p><p style="MARGIN: 0px">}</p></div>


<!--EndFragment-->


<p>Pretty plain and simple.&nbsp; It calls the filter on the image when it runs.&nbsp; We need to notify the canvas to redraw the new image, so we raise the already implemented event <em>ImageLoaded</em>.&nbsp; Once this fires, the DisplayImageWorkItem picks it up and displays the filtered image.</p>


<p>Let&rsquo;s check out the app in action.</p>


<p><em>The original image<br /><img src="/images/CropperCapture%5B52%5D_small_.jpg" alt="The original image"  border="0"  /></em></p>


<p><em>The Black &amp; White filter applied<br /><img src="/images/CropperCapture%5B53%5D_small_.jpg" alt="The Black &amp; White filter applied"  border="0"  /></em></p>


<p><em>The inversion filter applied<br /><img
alt="The inversion filter applied" src="http://www.flux88.com/uploads/CropperCapture[54]_small.jpg" border="0" /></em></p>


<p>The image filters I originally wrote were painfully slow, so I borrowed some excellent filters from the code project article <a title="codeproject image processing" href="http://www.codeproject.com/cs/media/displacementfilters.asp" target="_blank">here</a>&nbsp;by Christian Graus.&nbsp; I&rsquo;m glad I could leverage somebody else&rsquo;s hard work, because it&rsquo;s been a few years since I did complex image processing <img src="/images/smile1___________________________.gif"   />.</p>


<p>I hope you enjoyed this short series of articles on building an application using CAB.&nbsp; I only touched on some of the topics.&nbsp; For example, ObjectBuilder was barely used in this application.&nbsp; I also didn&rsquo;t use WorkItem State or the StatePersistenceService.&nbsp; This would be a quick and easy way to save the users work, or you could provide a standard FileSaveDialog box.</p>


<p>You can download the source here:<br /><a href="http://www.flux88.com/uploads/CAB_2DImageEditor.zip" target="_blank">File Attachment: CAB-ImageEditor.zip (86 KB)</a><br /><em>(you&rsquo;ll need to have CAB already installed and you need to point the reference to the CAB dlls)</em></p>


<p>I&rsquo;d appreciate any comments or criticisms you may have for me.</p>

</div>
  <footer>
    <a rel="full-article" href="/blog/2007/03/writing-a-simple-image-editor-in-cab-part-4/">Read on &rarr;</a>
  </footer>


  </article>


  <article>
    
  <header>
    
      <h1 class="entry-title"><a href="/blog/2007/03/writing-a-simple-image-editor-in-cab-part-3/">Writing a Simple Image Editor in CAB - Part 3</a></h1>
    
    
      <p class="meta">




<time datetime="2007-03-13 00:00:00 -0500" pubdate  updated >Mar 13<span>th</span>, 2007</time>


</p>
    
  </header>


  <div class="entry-content"><p><a href="http://www.flux88.com/2007/03/09/Writing+A+Simple+Image+Editor+In+CAB++Part+2.aspx">Last time</a> I left off with a working shell, and we loaded a single module into the shell.&nbsp; In this article we&rsquo;ll cover:</p>


<ul><li>Raising and handling events</li><li>Invoking and handling commands</li><li>Adding dynamic items to a UIExtensionSite (our menu)</li></ul>


<p>We have the ability to display the image, but we need to be able to load the image from somewhere.&nbsp; </p>


<p>I created another WorkItem called ImageSelectionWorkItem.&nbsp; This workitem will be responsible for loading an image and raising an event that it occurred.</p>


<div style="FONT-SIZE: 8pt; BACKGROUND: white; COLOR: black; FONT-FAMILY: Consolas"><p style="MARGIN: 0px"><span style="COLOR: blue">using</span> System;</p><p style="MARGIN: 0px"><span style="COLOR: blue">using</span> Microsoft.Practices.CompositeUI;</p><p style="MARGIN: 0px">&nbsp;</p><p style="MARGIN: 0px"><span style="COLOR: blue">namespace</span> ImageDisplayModule.WorkItems.Selection</p><p style="MARGIN: 0px">{</p><p style="MARGIN: 0px">&nbsp; &nbsp; <span style="COLOR: blue">public</span> <span style="COLOR: blue">class</span> <span style="COLOR: teal">ImageSelectionWorkItem</span> : <span style="COLOR: teal">WorkItem</span></p><p style="MARGIN: 0px">&nbsp; &nbsp; {</p><p style="MARGIN: 0px">&nbsp;</p><p style="MARGIN: 0px">&nbsp; &nbsp; &nbsp; &nbsp; <span style="COLOR: blue">private</span> <span style="COLOR: teal">ImageSelectionView</span> _view;</p><p style="MARGIN: 0px">&nbsp; &nbsp; &nbsp; &nbsp; <span style="COLOR: blue">private</span> <span style="COLOR: teal">ImageSelectionPresenter</span> _presenter;</p><p style="MARGIN: 0px">&nbsp;</p><p style="MARGIN: 0px">&nbsp; &nbsp; &nbsp; &nbsp; <span style="COLOR: blue">protected</span> <span style="COLOR: blue">override</span> <span style="COLOR: blue">void</span> OnRunStarted()</p><p style="MARGIN: 0px">&nbsp; &nbsp; &nbsp; &nbsp; {</p><p style="MARGIN: 0px">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="COLOR: blue">base</span>.OnRunStarted();</p><p style="MARGIN: 0px">&nbsp;</p><p style="MARGIN: 0px">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="COLOR: green">//create &amp; wire up presenter</span></p><p style="MARGIN: 0px">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; _presenter = <span style="COLOR: blue">this</span>.Items.AddNew&lt;<span style="COLOR: teal">ImageSelectionPresenter</span>&gt;();</p><p style="MARGIN: 0px">&nbsp;</p><p style="MARGIN: 0px">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="COLOR: green">//create the view</span></p><p style="MARGIN: 0px">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; _view = <span style="COLOR: blue">new</span> <span style="COLOR: teal">ImageSelectionView</span>(_presenter);</p><p style="MARGIN: 0px">&nbsp;</p><p style="MARGIN: 0px">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="COLOR: green">//run the view</span></p><p style="MARGIN: 0px">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; _view.Show();&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </p><p style="MARGIN: 0px">&nbsp; &nbsp; &nbsp; &nbsp; }&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </p><p style="MARGIN: 0px">&nbsp;</p><p style="MARGIN: 0px">&nbsp;</p><p style="MARGIN: 0px">&nbsp; &nbsp; }</p><p style="MARGIN: 0px">}</p></div>


<!--EndFragment-->


<p>This code here is just wiring up the view and presenter so that they can communicate.&nbsp; Take note on the line where we call this.Items.AddNew&lt;&gt;.&nbsp; This will instantiate the type provided and add it to the items collection of the WorkItem.&nbsp; It is important to belong to this collection if you are going to participate in any handle or raise any CAB events or commands.&nbsp; Our presenter is going to raise an event, so it needs to be added to the Items collection of the WorkItem.</p>


<p>Here is the presenter:</p>


<div style="FONT-SIZE: 8pt; BACKGROUND: white; COLOR: black; FONT-FAMILY: Consolas"><p style="MARGIN: 0px"><span style="COLOR: blue">public</span> <span style="COLOR: blue">class</span> <span style="COLOR: teal">ImageSelectionPresenter</span></p><p style="MARGIN: 0px">{</p><p style="MARGIN: 0px">&nbsp; &nbsp; [<span style="COLOR: teal">EventPublication</span>(<span style="COLOR: teal">ModuleConstants</span>.<span style="COLOR: teal">Events</span>.ImageLoaded, <span style="COLOR: teal">PublicationScope</span>.Global)]</p><p style="MARGIN: 0px">&nbsp; &nbsp; <span style="COLOR: blue">public</span> <span style="COLOR: blue">event</span> <span style="COLOR: teal">EventHandler</span>&lt;<span style="COLOR: teal">DataEventArgs</span>&lt;<span style="COLOR: teal">Bitmap</span>&gt;&gt; ImageLoaded;</p><p style="MARGIN: 0px">&nbsp;</p><p style="MARGIN: 0px">&nbsp; &nbsp; <span style="COLOR: blue">public</span> <span style="COLOR: blue">void</span> OnFileSelected(<span style="COLOR: blue">string</span> filename)</p><p style="MARGIN: 0px">&nbsp; &nbsp; {</p><p style="MARGIN: 0px">&nbsp; &nbsp; &nbsp; &nbsp; <span style="COLOR: blue">if</span> (ImageLoaded != <span style="COLOR: blue">null</span>)</p><p style="MARGIN: 0px">&nbsp; &nbsp; &nbsp; &nbsp; {</p><p style="MARGIN: 0px">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="COLOR: teal">Image</span> img = <span style="COLOR: teal">Image</span>.FromFile(filename);</p><p style="MARGIN: 0px">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="COLOR: teal">Bitmap</span> bmp = <span style="COLOR: blue">new</span> <span style="COLOR: teal">Bitmap</span>(img);</p><p style="MARGIN: 0px">&nbsp;</p><p style="MARGIN: 0px">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ImageLoaded(<span style="COLOR: blue">this</span>, <span style="COLOR: blue">new</span> <span style="COLOR: teal">DataEventArgs</span>&lt;<span style="COLOR: teal">Bitmap</span>&gt;(bmp));</p><p style="MARGIN: 0px">&nbsp; &nbsp; &nbsp; &nbsp; }</p><p style="MARGIN: 0px">&nbsp; &nbsp; }</p><p style="MARGIN: 0px">}</p></div>


<p><!--EndFragment--><br />The view is going to call this function when the user selects a file, and the presenter will raise a global CAB event.&nbsp; I defined the event name as a constant so that it can be safely referred to throughout the module.</p>


<p>The view isn&rsquo;t actually a User Control.&nbsp; It&rsquo;s just a class that opens a windows forms dialog for opening the file:</p>


<div style="FONT-SIZE: 8pt; BACKGROUND: white; COLOR: black; FONT-FAMILY: Consolas"><p style="MARGIN: 0px"><span style="COLOR: blue">public</span> <span style="COLOR: blue">class</span> <span style="COLOR: teal">ImageSelectionView</span></p><p style="MARGIN: 0px">{</p><p style="MARGIN: 0px">&nbsp;</p><p style="MARGIN: 0px">&nbsp; &nbsp; <span style="COLOR: blue">private</span> <span style="COLOR: teal">ImageSelectionPresenter</span> _presenter; </p><p style="MARGIN: 0px">&nbsp;</p><p style="MARGIN: 0px">&nbsp; &nbsp; <span style="COLOR: blue">public</span> ImageSelectionView(<span style="COLOR: teal">ImageSelectionPresenter</span> presenter)</p><p style="MARGIN: 0px">&nbsp; &nbsp; {</p><p style="MARGIN: 0px">&nbsp; &nbsp; &nbsp; &nbsp; _presenter = presenter;</p><p style="MARGIN: 0px">&nbsp; &nbsp; }</p><p style="MARGIN: 0px">&nbsp;</p><p style="MARGIN: 0px">&nbsp; &nbsp; <span style="COLOR: blue">public</span> <span style="COLOR: blue">void</span> Show()</p><p style="MARGIN: 0px">&nbsp; &nbsp; {</p><p style="MARGIN: 0px">&nbsp; &nbsp; &nbsp; &nbsp; <span style="COLOR: blue">using</span> (<span style="COLOR: teal">OpenFileDialog</span> fileDlg = <span style="COLOR: blue">new</span> <span style="COLOR: teal">OpenFileDialog</span>())</p><p style="MARGIN: 0px">&nbsp; &nbsp; &nbsp; &nbsp; {</p><p style="MARGIN: 0px">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; fileDlg.Filter = <span style="COLOR: maroon">&#8220;Picture files (*.gif; *.jpg; *.bmp; *.png)|*.gif;*.png;*.bmp;*.jpg&#8221;</span>;</p><p style="MARGIN: 0px">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="COLOR: teal">DialogResult</span> result = fileDlg.ShowDialog();</p><p style="MARGIN: 0px">&nbsp;</p><p style="MARGIN: 0px">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="COLOR: blue">if</span> (result == <span style="COLOR: teal">DialogResult</span>.OK)</p><p style="MARGIN: 0px">&nbsp; &nbsp; &nbsp; &nbsp
; &nbsp; &nbsp; {</p><p style="MARGIN: 0px">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; OnFileSelected(fileDlg.FileName);</p><p style="MARGIN: 0px">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; }</p><p style="MARGIN: 0px">&nbsp; &nbsp; &nbsp; &nbsp; }</p><p style="MARGIN: 0px">&nbsp; &nbsp; }</p><p style="MARGIN: 0px">&nbsp;</p><p style="MARGIN: 0px">&nbsp; &nbsp; <span style="COLOR: blue">public</span> <span style="COLOR: blue">void</span> OnFileSelected(<span style="COLOR: blue">string</span> filename)</p><p style="MARGIN: 0px">&nbsp; &nbsp; {</p><p style="MARGIN: 0px">&nbsp; &nbsp; &nbsp; &nbsp; _presenter.OnFileSelected(filename);</p><p style="MARGIN: 0px">&nbsp;</p><p style="MARGIN: 0px">&nbsp; &nbsp; }</p><p style="MARGIN: 0px">&nbsp;</p><p style="MARGIN: 0px">}</p></div>


<p>This class focuses on the UI only, the decision on what to do is provided through the presenter.</p>


<p>So now that we have this WorkItem completed, we need a way to call it!&nbsp; To facilitate this, we&rsquo;ll load up an &ldquo;Open image&rdquo; menu option and load our work item when this is clicked.</p>


<p>Our application (the shell) has to expose the menu as a UI Extension site.&nbsp; In order to do this, we need to register it.&nbsp; So, in our ImageEditorApplication class:</p>


<div style="FONT-SIZE: 8pt; BACKGROUND: white; COLOR: black; FONT-FAMILY: Consolas"><p style="MARGIN: 0px"><span style="COLOR: blue">protected</span> <span style="COLOR: blue">override</span> <span style="COLOR: blue">void</span> AfterShellCreated()</p><p style="MARGIN: 0px">{</p><p style="MARGIN: 0px">&nbsp; &nbsp; <span style="COLOR: blue">base</span>.AfterShellCreated();</p><p style="MARGIN: 0px">&nbsp;</p><p style="MARGIN: 0px">&nbsp; &nbsp; <span style="COLOR: blue">this</span>.RootWorkItem.UIExtensionSites.RegisterSite(<span style="COLOR: maroon">&#8220;MainMenuStrip&#8221;</span>, <span style="COLOR: blue">this</span>.Shell.MainMenuStrip.Items);</p><p style="MARGIN: 0px">&nbsp; &nbsp; <span style="COLOR: blue">this</span>.RootWorkItem.UIExtensionSites.RegisterSite(<span style="COLOR: maroon">&#8220;FileMenu&#8221;</span>, <span style="COLOR: blue">this</span>.Shell.FileMenu.DropDownItems);</p><p style="MARGIN: 0px">}</p></div>


<!--EndFragment-->


<p>I registered the top-level menu as well as the File menu so we can append to it.&nbsp; <em>(Notice how I added the DropDownItems collection, rather than the item itself.&nbsp; If I don&rsquo;t&nbsp;do this then Items will be added as top level items, not children.&nbsp; This took me a while to figure out&hellip;)</em></p>


<p>The next step is to find the well-known UI Extension Site for the menu (I called it &ldquo;FileMenu&rdquo;) and add our menu item to it (from the Module).&nbsp; The reason this looks indirect is because <em>CAB applications are, by nature, loosely-coupled.</em>&nbsp; This is a good thing.</p>


<p>Our module init class now looks like this:</p>


<div style="FONT-SIZE: 8pt; BACKGROUND: white; COLOR: black; FONT-FAMILY: Consolas"><p style="MARGIN: 0px"><span style="COLOR: blue">public</span> <span style="COLOR: blue">class</span> <span style="COLOR: teal">ImageDisplayModuleInit</span> : <span style="COLOR: teal">ModuleInit</span></p><p style="MARGIN: 0px">{</p><p style="MARGIN: 0px">&nbsp; &nbsp; <span style="COLOR: blue">private</span> <span style="COLOR: teal">WorkItem</span> _rootWorkItem;</p><p style="MARGIN: 0px">&nbsp; &nbsp; [<span style="COLOR: teal">ServiceDependency</span>]</p><p style="MARGIN: 0px">&nbsp; &nbsp; <span style="COLOR: blue">public</span> <span style="COLOR: teal">WorkItem</span> RootWorkItem</p><p style="MARGIN: 0px">&nbsp; &nbsp; {</p><p style="MARGIN: 0px">&nbsp; &nbsp; &nbsp; &nbsp; <span style="COLOR: blue">get</span> { <span style="COLOR: blue">return</span> _rootWorkItem; }</p><p style="MARGIN: 0px">&nbsp; &nbsp; &nbsp; &nbsp; <span style="COLOR: blue">set</span> { _rootWorkItem = <span style="COLOR: blue">value</span>; }</p><p style="MARGIN: 0px">&nbsp; &nbsp; }</p><p style="MARGIN: 0px">&nbsp;</p><p style="MARGIN: 0px">&nbsp; &nbsp; <span style="COLOR: blue">public</span> <span style="COLOR: blue">override</span> <span style="COLOR: blue">void</span> Load()</p><p style="MARGIN: 0px">&nbsp; &nbsp; {</p><p style="MARGIN: 0px">&nbsp; &nbsp; &nbsp; &nbsp; <span style="COLOR: blue">base</span>.Load();&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </p><p style="MARGIN: 0px">&nbsp;</p><p style="MARGIN: 0px">&nbsp; &nbsp; &nbsp; &nbsp; <span style="COLOR: green">//create workitem(s)</span></p><p style="MARGIN: 0px">&nbsp; &nbsp; &nbsp; &nbsp; <span style="COLOR: teal">DisplayImageWorkItem</span> wi = RootWorkItem.WorkItems.AddNew&lt;<span style="COLOR: teal">DisplayImageWorkItem</span>&gt;();</p><p style="MARGIN: 0px">&nbsp;</p><p style="MARGIN: 0px">&nbsp; &nbsp; &nbsp; &nbsp; <span style="COLOR: green">//modify the ui extension sites</span></p><p style="MARGIN: 0px">&nbsp; &nbsp; &nbsp; &nbsp; CreateMenuItems();</p><p style="MARGIN: 0px">&nbsp;</p><p style="MARGIN: 0px">&nbsp; &nbsp; &nbsp; &nbsp; <span style="COLOR: green">//run the workitem</span></p><p style="MARGIN: 0px">&nbsp; &nbsp; &nbsp; &nbsp; wi.Run();</p><p style="MARGIN: 0px">&nbsp; &nbsp; }</p><p style="MARGIN: 0px">&nbsp;</p><p style="MARGIN: 0px">&nbsp; &nbsp; <span style="COLOR: blue">private</span> <span style="COLOR: blue">void</span> CreateMenuItems()</p><p style="MARGIN: 0px">&nbsp; &nbsp; {&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </p><p style="MARGIN: 0px">&nbsp; &nbsp; &nbsp; &nbsp; <span style="COLOR: green">//creat file-&gt;open menu item &amp; register click command invoker</span></p><p style="MARGIN: 0px">&nbsp; &nbsp; &nbsp; &nbsp; <span style="COLOR: teal">ToolStripMenuItem</span> fileOpen = <span style="COLOR: blue">new</span> <span style="COLOR: teal">ToolStripMenuItem</span>(<span style="COLOR: maroon">&#8220;Open Image&#8221;</span>);</p><p style="MARGIN: 0px">&nbsp; &nbsp; &nbsp; &nbsp; RootWorkItem.Commands[<span style="COLOR: teal">ModuleConstants</span>.<span style="COLOR: teal">Commands</span>.LoadImage].AddInvoker(fileOpen, <span style="COLOR: maroon">&#8220;Click&#8221;</span>); </p><p style="MARGIN: 0px">&nbsp;</p><p style="MARGIN: 0px">&nbsp; &nbsp; &nbsp; &nbsp; <span style="COLOR: green">//add it to the file menu</span></p><p style="MARGIN: 0px">&nbsp; &nbsp; &nbsp; &nbsp; <span style="COLOR: teal">UIExtensionSite</span> site = RootWorkItem.UIExtensionSites[<span style="COLOR: maroon">&#8220;FileMenu&#8221;</span>];&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </p><p style="MARGIN: 0px">&nbsp; &nbsp; &nbsp; &nbsp; site.Add&lt;<span style="COLOR: teal">ToolStripMenuItem</span>&gt;(fileOpen);</p><p style="MARGIN: 0px">&nbsp; &nbsp; }</p><p style="MARGIN: 0px">&nbsp;</p><p style="MARGIN: 0px">&nbsp; &nbsp; [<span style="COLOR: teal">CommandHandler</span>(<span style="COLOR: teal">ModuleConstants</span>.<span style="COLOR: teal">Commands</span>.LoadImage)]</p><p style="MARGIN: 0px">&nbsp; &nbsp; <span style="COLOR: blue">public</span> <span style="COLOR: blue">void</span> LoadImage(<span style="COLOR: blue">object</span> sender, <span style="COLOR: teal">EventArgs</span> e)</p><p style="MARGIN: 0px">&nbsp; &nbsp; {</p><p style="MARGIN: 0px">&nbsp; &nbsp; &nbsp; &nbsp; <span style="COLOR: blue">string</span> id = <span style="COLOR: maroon">&#8220;LoadImageWorkItem&#8221;</span>;</p><p style="MARGIN: 0px">&nbsp; &nbsp; &nbsp; &nbsp; <span style="COLOR: teal">ImageSelectionWorkItem</span> wi;</p><p style="MARGIN: 0px">&nbsp; &nbsp; &nbsp; &nbsp; <span style="COLOR: blue">if</span> (RootWorkItem.WorkItems.Contains(id))</p><p style="MARGIN: 0px">&nbsp; &nbsp; &nbsp; &nbsp; {</p><p style="MARGIN: 0px">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; wi = RootWorkItem.WorkItems[id] <span style="COLOR: blue">as</span> <span style="COLOR: teal">ImageSelectionWorkItem</span>;</p><p style="MARGIN: 0px">&nbsp; &nbsp; &nbsp; &nbsp; }</p><p style="MARGIN: 0px">&nbsp; &nbsp; &nbsp; &nbsp; <span style="COLOR: blue">else</span></p><p style="MARGIN: 0px">&nbsp; &nbsp; &nbsp; &nbsp; {</p><p style="MARGIN: 0px">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; wi = RootWorkItem.WorkItems.AddNew&lt;<span style="COLOR: teal">Image
SelectionWorkItem</span>&gt;(id);</p><p style="MARGIN: 0px">&nbsp; &nbsp; &nbsp; &nbsp; }</p><p style="MARGIN: 0px">&nbsp;</p><p style="MARGIN: 0px">&nbsp; &nbsp; &nbsp; &nbsp; wi.Run();</p><p style="MARGIN: 0px">&nbsp; &nbsp; }</p><p style="MARGIN: 0px">}</p></div>


<!--EndFragment-->


<p>There is a lot going on here, so I&rsquo;ll take it in pieces.&nbsp; First off, we added a call to CreateMenuItems().&nbsp; This method will be responsible for loading any menu items required by its work items.&nbsp;&nbsp; We create our menu item for &ldquo;Open Image&rdquo; and add it&rsquo;s click event as a <em>Command Invoker</em>.&nbsp; This is very similar to wiring up events.</p>


<p>We also have a method decorated with the CommandHandler attribute.&nbsp; This is the handler for when the menu item is clicked.&nbsp; It&rsquo;s purpose is to create and launch the new image selection work item.</p>


<p>So if we can recap for a moment, our module loads, it stuffs in a new menu item into the File menu.&nbsp; The user clicks this, which invokes a command called &ldquo;LoadImage&rdquo;.&nbsp; A Command Handler picks this up and launches the ImageSelectionWorkItem.&nbsp; It will display an open file dialog where the user can select an image.&nbsp; Once the image is selected, an event is published.&nbsp; We currently have a subscriber to this event, and it&rsquo;s job is to load the selected image into the display work item.</p>


<p>If we run the application, we can now browse for an image, select it, and it loads onto our canvas:</p>


<p><img src="/images/CropperCapture%5B48%5D_small_.jpg" alt="Our new menu item, loaded into the UI Extension site"  border="1"  /></p>


<p><img src="/images/CropperCapture%5B49%5D_small_.jpg" alt="CropperCapture[49]"  border="1"  /></p>


<p>So at this point we&rsquo;ve touched on most of the CAB concepts.&nbsp; Next we&rsquo;ll introduce another module for Filtering the image, kind of like a mini-photoshop (maybe that&rsquo;s going too far, but you get the idea&hellip;).</p>


<p>Until next time!</p>

</div>
  <footer>
    <a rel="full-article" href="/blog/2007/03/writing-a-simple-image-editor-in-cab-part-3/">Read on &rarr;</a>
  </footer>


  </article>


  <article>
    
  <header>
    
      <h1 class="entry-title"><a href="/blog/2007/03/writing-a-simple-image-editor-in-cab-part-2/">Writing a Simple Image Editor in CAB - Part 2</a></h1>
    
    
      <p class="meta">




<time datetime="2007-03-09 00:00:00 -0600" pubdate  updated >Mar 9<span>th</span>, 2007</time>


</p>
    
  </header>


  <div class="entry-content"><p>So after part 1, we have a shell ready to go.&nbsp; We haven&rsquo;t done anything <em>CABish</em> yet, but we will in this post.</p>


<p>The first thing we need to do is create our layout that modules will be loaded into.&nbsp; If you remember, CAB Shells basically contain 2 possible things:&nbsp; Workspaces and UI Extension sites.&nbsp; It just so happens that we&rsquo;ll need both!</p>


<p>First, we&rsquo;ll need a menu for loading the image and applying filters.&nbsp; That will be our UI Extension Site.</p>


<p>Second we need a workspace in which to load the image display module.</p>


<p><img src="/images/CropperCapture%5B42%5D_small_.jpg" alt="Our first UI Extension Site"  border="1"  /></p>


<p>Here I added a MenuStrip and created our default <em>File</em> menu.&nbsp; Give it a name like <strong>mainMenuToolStrip</strong> so that you can refer to it later.</p>


<p>Next we want to add a workspace so that we can load the image.&nbsp; To gain access to these CAB UI controls, you need to add them to the toolbox on the left.&nbsp; Right click on the Toolbox Pane, select <strong>Add Tab</strong> and name it <strong>CAB Controls</strong>.&nbsp; Then right click on the name and select <strong>Choose Items.</strong>&nbsp; You&rsquo;ll have to Browse for the <strong>Microsoft.Practices.CompositeUI.WinForms.dll</strong>.&nbsp; Select all of the controls and click OK.</p>


<p>Now you should see a toolbox group like this:</p>


<p><img src="/images/CropperCapture%5B43%5D_small_.jpg" alt="CropperCapture[43]"  border="1"  /></p>


<p>We will use the <strong>DeckWorkspace</strong> control.&nbsp; Drag that onto the form and name it <strong>mainWorkspace</strong>.&nbsp; Make sure that you dock it to fill the form.</p>


<p>It should look like this:</p>


<p><img src="/images/CropperCapture%5B44%5D_small_.jpg" alt="CropperCapture[44]"  border="1"  /></p>


<p>We have our basic form, now it&rsquo;s time to load the first module into it!</p>


<p>Create a new class library project called <strong>ImageDisplayModule</strong>.&nbsp; Rename <em>Class1.cs</em> to <em>ImageDisplayModuleInit.cs.&nbsp; </em>You&rsquo;ll need a reference to the dlls mentioned above as well.</p>


<p>If you recall, a module contains work items.&nbsp; Our first work item is <em>DisplayImageWorkItem</em>.&nbsp; It&rsquo;s responsibility is to load an image and display it on the form.</p>


<p>Let&rsquo;s start out by creating the View.&nbsp; The view is a user control with a `[SmartPart]` attribute applied.&nbsp; The view is going to consist of an ImagePlaceHolder.&nbsp;&nbsp; Also keep in mind that we are doing this with Model-View-Presenter, so we&rsquo;ll start by identifying the interface for our view.</p>


<p>Create an interface called <strong>IDisplayImageView</strong>.&nbsp; The only real member that this interface ensures is that you can set and retrieve an image.</p>


<div style="FONT-SIZE: 8pt; BACKGROUND: white; COLOR: black; FONT-FAMILY: Consolas"><p style="MARGIN: 0px"><span style="COLOR: blue">public</span> <span style="COLOR: blue">interface</span> <span style="COLOR: teal">IDisplayImageView</span></p><p style="MARGIN: 0px">{</p><p style="MARGIN: 0px">&nbsp; &nbsp; <span style="COLOR: blue">public</span> <span style="COLOR: teal">Bitmap</span> Image</p><p style="MARGIN: 0px">&nbsp; &nbsp; {</p><p style="MARGIN: 0px">&nbsp; &nbsp; &nbsp; &nbsp; <span style="COLOR: blue">get</span>;</p><p style="MARGIN: 0px">&nbsp; &nbsp; &nbsp; &nbsp; <span style="COLOR: blue">set</span>;</p><p style="MARGIN: 0px">&nbsp; &nbsp; }</p><p style="MARGIN: 0px">&nbsp;</p><p style="MARGIN: 0px">}</p></div>


<!--EndFragment-->


<p>Next, create a new UserControl called <strong>DisplayImageView</strong>.&nbsp; This user control needs to implement the <strong>IDisplayImageView</strong> interface.&nbsp; Also notice that I have placed the `[SmartPart]` attribute on the class as well.</p>


<div style="FONT-SIZE: 8pt; BACKGROUND: white; COLOR: black; FONT-FAMILY: Consolas"><p style="MARGIN: 0px"><span style="COLOR: blue">using</span> System;</p><p style="MARGIN: 0px"><span style="COLOR: blue">using</span> System.Drawing;</p><p style="MARGIN: 0px"><span style="COLOR: blue">using</span> System.Windows.Forms;</p><p style="MARGIN: 0px"><span style="COLOR: blue">using</span> Microsoft.Practices.CompositeUI.SmartParts;</p><p style="MARGIN: 0px">&nbsp;</p><p style="MARGIN: 0px"><span style="COLOR: blue">namespace</span> ImageDisplayModule.cs.WorkItems</p><p style="MARGIN: 0px">{</p><p style="MARGIN: 0px">&nbsp; &nbsp; [<span style="COLOR: teal">SmartPart</span>]</p><p style="MARGIN: 0px">&nbsp; &nbsp; <span style="COLOR: blue">public</span> <span style="COLOR: blue">partial</span> <span style="COLOR: blue">class</span> <span style="COLOR: teal">DisplayImageView</span> : <span style="COLOR: teal">UserControl</span>, <span style="COLOR: teal">IDisplayImageView</span></p><p style="MARGIN: 0px">&nbsp; &nbsp; {</p><p style="MARGIN: 0px">&nbsp; &nbsp; &nbsp; &nbsp; <span style="COLOR: blue">private</span> <span style="COLOR: teal">Bitmap</span> _image;</p><p style="MARGIN: 0px">&nbsp;</p><p style="MARGIN: 0px">&nbsp; &nbsp; &nbsp; &nbsp; <span style="COLOR: blue">public</span> DisplayImageView()</p><p style="MARGIN: 0px">&nbsp; &nbsp; &nbsp; &nbsp; {</p><p style="MARGIN: 0px">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; InitializeComponent();</p><p style="MARGIN: 0px">&nbsp; &nbsp; &nbsp; &nbsp; }</p><p style="MARGIN: 0px">&nbsp;</p><p style="MARGIN: 0px"><span style="COLOR: blue">&nbsp; &nbsp; &nbsp; &nbsp; #region</span> IDisplayImageView Members</p><p style="MARGIN: 0px">&nbsp;</p><p style="MARGIN: 0px">&nbsp; &nbsp; &nbsp; &nbsp; <span style="COLOR: blue">public</span> <span style="COLOR: teal">Bitmap</span> Image</p><p style="MARGIN: 0px">&nbsp; &nbsp; &nbsp; &nbsp; {</p><p style="MARGIN: 0px">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="COLOR: blue">get</span> { <span style="COLOR: blue">return</span> _image; }</p><p style="MARGIN: 0px">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span style="COLOR: blue">set</span> { _image = <span style="COLOR: blue">value</span>; }</p><p style="MARGIN: 0px">&nbsp; &nbsp; &nbsp; &nbsp; }</p><p style="MARGIN: 0px">&nbsp;</p><p style="MARGIN: 0px"><span style="COLOR: blue">&nbsp; &nbsp; &nbsp; &nbsp; #endregion</span></p><p style="MARGIN: 0px">&nbsp; &nbsp; }</p><p style="MARGIN: 0px">}</p></div>


<!--EndFragment-->


<p>&nbsp;Next, we&rsquo;ll switch over to design view and drag a `PictureBox` on the control.&nbsp; I&rsquo;ve also added a dummy label so that we can identify this control on the form in a minute.</p>


<p>Here&rsquo;s what it looks like:</p>


<p><img src="/images/CropperCapture%5B45%5D_small_.jpg" alt="CropperCapture[45]"  border="1"  /></p>


<p>I&rsquo;ve also created a presenter that will control all of the UI logic for this view:</p>


<div style="FONT-SIZE: 8pt; BACKGROUND: white; COLOR: black; FONT-FAMILY: Consolas"><p style="MARGIN: 0px"><span style="COLOR: blue">public</span> <span style="COLOR: blue">class</span> <span style="COLOR: teal">DisplayImagePresenter</span></p><p style="MARGIN: 0px">{</p><p style="MARGIN: 0px">&nbsp; &nbsp; <span style="COLOR: blue">private</span> <span style="COLOR: teal">IDisplayImageView</span> _view;</p><p style="MARGIN: 0px">&nbsp;</p><p style="MARGIN: 0px">&nbsp; &nbsp; <span style="COLOR: blue">public</span> DisplayImagePresenter(<span style="COLOR: teal">IDisplayImageView</span> view)</p><p style="MARGIN: 0px">&nbsp; &nbsp; {</p><p style="MARGIN: 0px">&nbsp; &nbsp; &nbsp; &nbsp; _view = view;</p><p style="MARGIN: 0px">&nbsp; &nbsp; }</p><p style="MARGIN: 0px">&nbsp;</p><p style="MARGIN: 0px">&nbsp; &nbsp; [<span style="COLOR: teal">EventSubscription</span>(<span style="COLOR: maroon">&#8220;topic://ImageEditor/ImageDisplayModule/ImageLoaded&#8221;</span>, Thread=<span style="COLOR: teal">ThreadOption</span>.UserInterface)]</p><p style="MARGIN: 0px">&nbsp; &nbsp; <span style="COLOR: blue">public</span> <span style="COLOR: blue">void</span> OnImageLoaded(<span style="COLOR: blue">object</span> sender, <span style="COLOR: teal">DataEventArgs</span>&lt;<span style="COLOR: teal">Bitmap</span
>&gt; e)</p><p style="MARGIN: 0px">&nbsp; &nbsp; {</p><p style="MARGIN: 0px">&nbsp; &nbsp; &nbsp; &nbsp; _view.Image = e.Data;</p><p style="MARGIN: 0px">&nbsp; &nbsp; }</p><p style="MARGIN: 0px">}</p></div>


<p>Here you can see that the view is accepted in the construtor, and we are responding to an event.&nbsp; The topic:// is just a hierarchical way of naming events that we might care about.&nbsp; Basically the presenter is going to listen for an event when a picture is loaded, and set the image to the view once it fires.</p>


<p>In order to load this module into our shell, we need a few more pieces.&nbsp; The first is a ProfileCatalog.xml file.&nbsp; This tells the shell what modules to load.</p>


<p>Place an xml file in the shell project and make sure that the properties are set to <strong>Copy Always</strong> so that it will end up in your output directory.&nbsp; The file should look like this:</p>


<div style="FONT-SIZE: 8pt; BACKGROUND: white; COLOR: black; FONT-FAMILY: Consolas"><p style="MARGIN: 0px"><span style="COLOR: blue">&lt;?</span><span style="COLOR: maroon">xml</span><span style="COLOR: blue"> </span><span style="COLOR: red">version</span><span style="COLOR: blue">=</span>&#8221;<SPAN style="color: blue">1.0</SPAN>&#8221;<span style="COLOR: blue"> </span><span style="COLOR: red">encoding</span><span style="COLOR: blue">=</span>&#8221;<SPAN style="color: blue">utf-8</SPAN>&#8221;<span style="COLOR: blue"> ?&gt;</span></p><p style="MARGIN: 0px"><span style="COLOR: blue">&lt;</span><span style="COLOR: maroon">SolutionProfile</span><span style="COLOR: blue"> </span><span style="COLOR: red">xmlns</span><span style="COLOR: blue">=</span>&#8221;<SPAN style="color: blue">http://schemas.microsoft.com/pag/cab-profile</SPAN>&#8221;<span style="COLOR: blue">&gt;</span></p><p style="MARGIN: 0px"><span style="COLOR: blue">&nbsp; &lt;</span><span style="COLOR: maroon">Modules</span><span style="COLOR: blue">&gt;</span></p><p style="MARGIN: 0px"><span style="COLOR: blue">&nbsp; &nbsp; &lt;</span><span style="COLOR: maroon">ModuleInfo</span><span style="COLOR: blue"> </span><span style="COLOR: red">AssemblyFile</span><span style="COLOR: blue">=</span>&#8221;<SPAN style="color: blue">ImageDisplayModule.dll</SPAN>&#8221;<span style="COLOR: blue"> /&gt;</span></p><p style="MARGIN: 0px"><span style="COLOR: blue">&nbsp; &lt;/</span><span style="COLOR: maroon">Modules</span><span style="COLOR: blue">&gt;</span></p><p style="MARGIN: 0px"><span style="COLOR: blue">&lt;/</span><span style="COLOR: maroon">SolutionProfile</span><span style="COLOR: blue">&gt;</span></p></div>


<p>The important concept to grasp here is that there is no project level reference to the module project.&nbsp; The dll is placed directly in the shell&rsquo;s bin folder, and CAB is going to read this file to know to load it.</p>


<p>When CAB goes to load a module, it will scan the assembly for a class that inherits from `ModuleInit`.&nbsp; So, I created an `ImageDisplayModuleInit` class&nbsp;:</p>


<div style="FONT-SIZE: 8pt; BACKGROUND: white; COLOR: black; FONT-FAMILY: Consolas"><p style="MARGIN: 0px"><span style="COLOR: blue">public</span> <span style="COLOR: blue">class</span> <span style="COLOR: teal">ImageDisplayModuleInit</span> : <span style="COLOR: teal">ModuleInit</span></p><p style="MARGIN: 0px">{</p><p style="MARGIN: 0px">&nbsp; &nbsp; <span style="COLOR: blue">private</span> <span style="COLOR: teal">WorkItem</span> _rootWorkItem;</p><p style="MARGIN: 0px">&nbsp; &nbsp; [<span style="COLOR: teal">ServiceDependency</span>]</p><p style="MARGIN: 0px">&nbsp; &nbsp; <span style="COLOR: blue">public</span> <span style="COLOR: teal">WorkItem</span> RootWorkItem</p><p style="MARGIN: 0px">&nbsp; &nbsp; {</p><p style="MARGIN: 0px">&nbsp; &nbsp; &nbsp; &nbsp; <span style="COLOR: blue">get</span> { <span style="COLOR: blue">return</span> _rootWorkItem; }</p><p style="MARGIN: 0px">&nbsp; &nbsp; &nbsp; &nbsp; <span style="COLOR: blue">set</span> { _rootWorkItem = <span style="COLOR: blue">value</span>; }</p><p style="MARGIN: 0px">&nbsp; &nbsp; }</p><p style="MARGIN: 0px">&nbsp;</p><p style="MARGIN: 0px">&nbsp; &nbsp; <span style="COLOR: blue">public</span> <span style="COLOR: blue">override</span> <span style="COLOR: blue">void</span> Load()</p><p style="MARGIN: 0px">&nbsp; &nbsp; {</p><p style="MARGIN: 0px">&nbsp; &nbsp; &nbsp; &nbsp; <span style="COLOR: blue">base</span>.Load();</p><p style="MARGIN: 0px">&nbsp;</p><p style="MARGIN: 0px">&nbsp; &nbsp; &nbsp; &nbsp; <span style="COLOR: green">//create workitem</span></p><p style="MARGIN: 0px">&nbsp; &nbsp; &nbsp; &nbsp; <span style="COLOR: teal">DisplayImageWorkItem</span> wi = RootWorkItem.WorkItems.AddNew&lt;<span style="COLOR: teal">DisplayImageWorkItem</span>&gt;(); </p><p style="MARGIN: 0px">&nbsp;</p><p style="MARGIN: 0px">&nbsp; &nbsp; &nbsp; &nbsp; <span style="COLOR: green">//run the workitem</span></p><p style="MARGIN: 0px">&nbsp; &nbsp; &nbsp; &nbsp; wi.Run();</p><p style="MARGIN: 0px">&nbsp; &nbsp; }</p></div>


<p>Here we take a reference to the Root WorkItem, which is provided to us through the [ServiceDependency] attribute from ObjectBuilder.&nbsp; The Load() method is called which instantiates our work item and runs it.</p>


<p>The work item then needs to load up any smartparts and place them in the required workspaces.</p>


<div style="FONT-SIZE: 8pt; BACKGROUND: white; COLOR: black; FONT-FAMILY: Consolas"><p style="MARGIN: 0px"><span style="COLOR: blue">public</span> <span style="COLOR: blue">class</span> <span style="COLOR: teal">DisplayImageWorkItem</span> : <span style="COLOR: teal">WorkItem</span></p><p style="MARGIN: 0px">{</p><p style="MARGIN: 0px">&nbsp; &nbsp; <span style="COLOR: blue">private</span> <span style="COLOR: teal">IDisplayImageView</span> _view;</p><p style="MARGIN: 0px">&nbsp; &nbsp; <span style="COLOR: blue">private</span> <span style="COLOR: teal">DisplayImagePresenter</span> _presenter;</p><p style="MARGIN: 0px">&nbsp;</p><p style="MARGIN: 0px">&nbsp; &nbsp; <span style="COLOR: blue">protected</span> <span style="COLOR: blue">override</span> <span style="COLOR: blue">void</span> OnRunStarted()</p><p style="MARGIN: 0px">&nbsp; &nbsp; {</p><p style="MARGIN: 0px">&nbsp; &nbsp; &nbsp; &nbsp; <span style="COLOR: blue">base</span>.OnRunStarted();</p><p style="MARGIN: 0px">&nbsp;</p><p style="MARGIN: 0px">&nbsp; &nbsp; &nbsp; &nbsp; ShowView();</p><p style="MARGIN: 0px">&nbsp; &nbsp; }</p><p style="MARGIN: 0px">&nbsp;</p><p style="MARGIN: 0px">&nbsp; &nbsp; <span style="COLOR: blue">private</span> <span style="COLOR: blue">void</span> ShowView()</p><p style="MARGIN: 0px">&nbsp; &nbsp; {</p><p style="MARGIN: 0px">&nbsp; &nbsp; &nbsp; &nbsp; <span style="COLOR: green">//create the view</span></p><p style="MARGIN: 0px">&nbsp; &nbsp; &nbsp; &nbsp; _view = <span style="COLOR: blue">this</span>.SmartParts.AddNew&lt;<span style="COLOR: teal">DisplayImageView</span>&gt;();</p><p style="MARGIN: 0px">&nbsp; &nbsp; &nbsp; &nbsp; _presenter = <span style="COLOR: blue">new</span> <span style="COLOR: teal">DisplayImagePresenter</span>(_view);</p><p style="MARGIN: 0px">&nbsp;</p><p style="MARGIN: 0px">&nbsp; &nbsp; &nbsp; &nbsp; <span style="COLOR: blue">this</span>.Workspaces[<span style="COLOR: maroon">&#8220;mainWorkspace&#8221;</span>].Show(_view);</p><p style="MARGIN: 0px">&nbsp; &nbsp; }</p><p style="MARGIN: 0px">}</p></div>


<p>This part is pretty self explanatory.&nbsp; We take the workspace name from the shell and tell it to show our smart part.</p>


<p>Everything is wired up now, so if you run the application you should see that the module has been loaded into the shell.</p>


<p><img src="/images/CropperCapture%5B46%5D_small_.jpg" alt="the app running with a module loaded"  border="1"  /></p>


<p>If you have troubles getting everything to work, make sure that your Module project is setup to output the dll inside the Shell&rsquo;s bin folder, and also verify that the profile catalog xml file is placed there as well.</p>


<p>Next time we&rsquo;ll figure out how to load the image using a different workitem.</p>

</div>
  <footer>
    <a rel="full-article" href="/blog/2007/03/writing-a-simple-image-editor-in-cab-part-2/">Read on &rarr;</a>
  </footer>


  </article>


  <article>
    
  <header>
    
      <h1 class="entry-title"><a href="/blog/2007/03/writing-a-simple-image-editor-in-cab-part-1-2/">Writing a Simple Image Editor in CAB - Part 1</a></h1>
    
    
      <p class="meta">




<time datetime="2007-03-09 00:00:00 -0600" pubdate  updated >Mar 9<span>th</span>, 2007</time>


</p>
    
  </header>


  <div class="entry-content"><p>I promised posts with more &ldquo;meat,&rdquo; so here it goes.&nbsp; I&rsquo;m going to demonstrate how to start writing a CAB application by building a simple image manipulation program.</p>


<p><u>Overview:<br />
</u><em>The application will load an image from some flexible source (file system, flickr, whatever).&nbsp; The image will be displayed on the canvas.&nbsp; The user will have various filters to apply to the image.&nbsp; These filters should be easily added later on, and they should all manipulate the image in some way.&nbsp; When everything is done, the user will have the option of saving the changes to disk.</em></p>


<p>So now that we have our high-level description of the app, let&rsquo;s build it!</p>


<p>Start up Visual Studio 2005, create a blank solution called <strong>CAB-ImageEditor</strong>.&nbsp; Add a new C# Windows application called <strong>ImageEditorShell</strong>.&nbsp; This will be the basic structure of the application, and we will add things to it.</p>


<p>Add the following references to your project:</p>


<ul>
<li>Microsoft.Practices.CompositeUI</li>
<li>Microsoft.Practices.ObjectBuilder</li>
<li>Microsoft.Practices.CompositeUI.WinForms</li>
</ul>


<p>First you need to delete the files&nbsp;that Visual Studio gives you out of the box.&nbsp; We will start from scratch.</p>


<p>Create a new Form called <strong>ImageEditorShell.cs</strong>.&nbsp; Give it a window title if you like.</p>


<p><img src="/images/CropperCapture%5B41%5D_small___.jpg" border="1"   /></p>


<p>Create a new class called <strong>ImageEditorApplication.cs</strong>.&nbsp; This will be the entry point for our application.&nbsp; We need to inherit the class from <strong>FormShellApplication&lt;T,K></strong> and give it the type of the root work item and our shell.</p>


<div style="FONT-SIZE: 8pt; BACKGROUND: white; COLOR: black; FONT-FAMILY: Consolas">
<p style="MARGIN: 0px"><span style="COLOR: blue">using</span> System;</p>
<p style="MARGIN: 0px"><span style="COLOR: blue">using</span> Microsoft.Practices.CompositeUI;</p>
<p style="MARGIN: 0px"><span style="COLOR: blue">using</span> Microsoft.Practices.CompositeUI.WinForms;</p>
<p style="MARGIN: 0px">&nbsp;</p>
<p style="MARGIN: 0px"><span style="COLOR: blue">namespace</span> ImageEditorShell</p>
<p style="MARGIN: 0px">{</p>
<p style="MARGIN: 0px">&nbsp; &nbsp; <span style="COLOR: blue">public</span> <span style="COLOR: blue">class</span> <span style="COLOR: teal">ImageEditorApplication</span> : <span style="COLOR: teal">FormShellApplication</span>&lt;<span style="COLOR: teal">WorkItem</span>, <span style="COLOR: teal">ImageEditorShell</span>></p>
<p style="MARGIN: 0px">&nbsp; &nbsp; {</p>
<p style="MARGIN: 0px">&nbsp;&nbsp;&nbsp; }</p>
<p style="MARGIN: 0px">}</p>
</div>


<p>We need an entry point to start the application, so add that&hellip;</p>


<div style="FONT-SIZE: 8pt; BACKGROUND: white; COLOR: black; FONT-FAMILY: Consolas">
<p style="MARGIN: 0px"><span style="COLOR: blue">public</span> <span style="COLOR: blue">class</span> <span style="COLOR: teal">ImageEditorApplication</span> : <span style="COLOR: teal">FormShellApplication</span>&lt;<span style="COLOR: teal">WorkItem</span>, <span style="COLOR: teal">ImageEditorShell</span>></p>
<p style="MARGIN: 0px">{</p>
<p style="MARGIN: 0px">&nbsp; &nbsp; <strong>[<span style="COLOR: teal">STAThread</span>]</strong></p>
<p style="MARGIN: 0px"><strong>&nbsp; &nbsp; <span style="COLOR: blue">public</span> <span style="COLOR: blue">static</span> <span style="COLOR: blue">void</span> Main()</strong></p>
<p style="MARGIN: 0px"><strong>&nbsp; &nbsp; {</strong></p>
<p style="MARGIN: 0px"><strong>&nbsp; &nbsp; &nbsp; &nbsp; <span style="COLOR: blue">new</span> <span style="COLOR: teal">ImageEditorApplication</span>().Run();</strong></p>
<p style="MARGIN: 0px"><strong>&nbsp; &nbsp; }</strong>&nbsp; &nbsp; &nbsp; &nbsp;</p>
<p style="MARGIN: 0px">}</p>
</div>


<p>That&rsquo;s all we need to get our application running.&nbsp; Go ahead and push F5 and see what happens.</p>


<p>Man, are you impressed yet?&nbsp; Hehe, chill out.&nbsp; There&rsquo;s more to come&hellip;</p>

</div>
  <footer>
    <a rel="full-article" href="/blog/2007/03/writing-a-simple-image-editor-in-cab-part-1-2/">Read on &rarr;</a>
  </footer>


  </article>


  <article>
    
  <header>
    
      <h1 class="entry-title"><a href="/blog/2007/03/writing-a-simple-image-editor-in-cab-part-1/">Writing a Simple Image Editor in CAB - Part 1</a></h1>
    
    
      <p class="meta">




<time datetime="2007-03-09 00:00:00 -0600" pubdate  updated >Mar 9<span>th</span>, 2007</time>


</p>
    
  </header>


  <div class="entry-content"><p>I promised posts with more &ldquo;meat,&rdquo; so here it goes.&nbsp; I&rsquo;m going to demonstrate how to start writing a CAB application by building a simple image manipulation program.</p>


<p><u>Overview:<br /></u><em>The application will load an image from some flexible source (file system, flickr, whatever).&nbsp; The image will be displayed on the canvas.&nbsp; The user will have various filters to apply to the image.&nbsp; These filters should be easily added later on, and they should all manipulate the image in some way.&nbsp; When everything is done, the user will have the option of saving the changes to disk.</em></p>


<p>So now that we have our high-level description of the app, let&rsquo;s build it!</p>


<p>Start up Visual Studio 2005, create a blank solution called <strong>CAB-ImageEditor</strong>.&nbsp; Add a new C# Windows application called <strong>ImageEditorShell</strong>.&nbsp; This will be the basic structure of the application, and we will add things to it.</p>


<p>Add the following references to your project:</p>


<ul><li>Microsoft.Practices.CompositeUI</li><li>Microsoft.Practices.ObjectBuilder</li><li>Microsoft.Practices.CompositeUI.WinForms</li></ul>


<p>First you need to delete the files&nbsp;that Visual Studio gives you out of the box.&nbsp; We will start from scratch.</p>


<p>Create a new Form called <strong>ImageEditorShell.cs</strong>.&nbsp; Give it a window title if you like.</p>


<p><img src="/images/CropperCapture%5B41%5D_small__.jpg" alt="Our blank shell"  border="1"  /></p>


<p>Create a new class called <strong>ImageEditorApplication.cs</strong>.&nbsp; This will be the entry point for our application.&nbsp; We need to inherit the class from <strong>FormShellApplication&lt;T,K&gt;</strong> and give it the type of the root work item and our shell.</p>


<div style="FONT-SIZE: 8pt; BACKGROUND: white; COLOR: black; FONT-FAMILY: Consolas"><p style="MARGIN: 0px"><span style="COLOR: blue">using</span> System;</p><p style="MARGIN: 0px"><span style="COLOR: blue">using</span> Microsoft.Practices.CompositeUI;</p><p style="MARGIN: 0px"><span style="COLOR: blue">using</span> Microsoft.Practices.CompositeUI.WinForms;</p><p style="MARGIN: 0px">&nbsp;</p><p style="MARGIN: 0px"><span style="COLOR: blue">namespace</span> ImageEditorShell</p><p style="MARGIN: 0px">{</p><p style="MARGIN: 0px">&nbsp; &nbsp; <span style="COLOR: blue">public</span> <span style="COLOR: blue">class</span> <span style="COLOR: teal">ImageEditorApplication</span> : <span style="COLOR: teal">FormShellApplication</span>&lt;<span style="COLOR: teal">WorkItem</span>, <span style="COLOR: teal">ImageEditorShell</span>&gt;</p><p style="MARGIN: 0px">&nbsp; &nbsp; {</p><p style="MARGIN: 0px">&nbsp;&nbsp;&nbsp; }</p><p style="MARGIN: 0px">}</p></div>


<p>We need an entry point to start the application, so add that&hellip;</p>


<div style="FONT-SIZE: 8pt; BACKGROUND: white; COLOR: black; FONT-FAMILY: Consolas"><p style="MARGIN: 0px"><span style="COLOR: blue">public</span> <span style="COLOR: blue">class</span> <span style="COLOR: teal">ImageEditorApplication</span> : <span style="COLOR: teal">FormShellApplication</span>&lt;<span style="COLOR: teal">WorkItem</span>, <span style="COLOR: teal">ImageEditorShell</span>&gt;</p><p style="MARGIN: 0px">{</p><p style="MARGIN: 0px">&nbsp; &nbsp; <strong>[<span style="COLOR: teal">STAThread</span>]</strong></p><p style="MARGIN: 0px"><strong>&nbsp; &nbsp; <span style="COLOR: blue">public</span> <span style="COLOR: blue">static</span> <span style="COLOR: blue">void</span> Main()</strong></p><p style="MARGIN: 0px"><strong>&nbsp; &nbsp; {</strong></p><p style="MARGIN: 0px"><strong>&nbsp; &nbsp; &nbsp; &nbsp; <span style="COLOR: blue">new</span> <span style="COLOR: teal">ImageEditorApplication</span>().Run();</strong></p><p style="MARGIN: 0px"><strong>&nbsp; &nbsp; }</strong>&nbsp; &nbsp; &nbsp; &nbsp; </p><p style="MARGIN: 0px">}</p></div>


<p>That&rsquo;s all we need to get our application running.&nbsp; Go ahead and push F5 and see what happens.</p>


<p>Man, are you impressed yet?&nbsp; Hehe, chill out.&nbsp; There&rsquo;s more to come&hellip;</p>

</div>
  <footer>
    <a rel="full-article" href="/blog/2007/03/writing-a-simple-image-editor-in-cab-part-1/">Read on &rarr;</a>
  </footer>


  </article>


  <article>
    
  <header>
    
      <h1 class="entry-title"><a href="/blog/2007/03/cab-hands-on-labs/">CAB - Hands on Labs</a></h1>
    
    
      <p class="meta">




<time datetime="2007-03-09 00:00:00 -0600" pubdate  updated >Mar 9<span>th</span>, 2007</time>


</p>
    
  </header>


  <div class="entry-content"><p>The very best resource I have found so far about working with CAB are the <a title="Microsoft - CAB Hands on Labs" href="http://www.microsoft.com/downloads/details.aspx?familyid=ab44f082-3abe-4583-8844-7252ff7c9638&amp;displaylang=en" target="_blank">Hands On Labs</a>.</p>


<p>For some reason they were very difficult to find for me.</p>


<p>If you&rsquo;re looking to understand CAB from a very beginner&rsquo;s perspective, then I highly recommend you go through them.&nbsp; There are 9 in total.</p>

</div>
  <footer>
    <a rel="full-article" href="/blog/2007/03/cab-hands-on-labs/">Read on &rarr;</a>
  </footer>


  </article>

<nav role="pagination">
  <div>
    
      <a class="prev" href="/blog/page/27/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/blog/page/25/">Newer &rarr;</a>
    
  </div>
</nav>

<script type="text/javascript">
    var disqus_shortname = 'subdigital';
    (function () {
      var s = document.createElement('script'); s.async = true;
      s.type = 'text/javascript';
      s.src = 'http://' + disqus_shortname + '.disqus.com/count.js';
      (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>

</div>
<aside role=sidebar>
  
    <section>
  <h1>Who am I?</h1>
  <p>I&#8217;m Ben Scheirman. I make Rails &amp; iPhone apps for <a href="http://chaione.com" target="_blank">ChaiONE</a> in Houston, TX.</p>
</section>
<section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2011/08/vim---could-not-invoke-jslint/">Vim - Could Not Invoke JSLint</a>
      </li>
    
      <li class="post">
        <a href="/blog/2011/08/is-rails-exempt-from-software-principles/">Is Rails Exempt?</a>
      </li>
    
      <li class="post">
        <a href="/blog/2011/08/when-viewwillappear-isnt-called/">When viewWillAppear: Isn&#8217;t Called</a>
      </li>
    
      <li class="post">
        <a href="/blog/2011/08/moving-my-blog/">Moving My Blog</a>
      </li>
    
      <li class="post">
        <a href="/blog/2011/08/my-vim-journey/">My Vim Journey</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>Latest Tweets</h1>
  <ul id="tweets">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  <script type="text/javascript">
    $.domReady(function(){
      getTwitterFeed("subdigital", 4, false);
    });
  </script>
  <script src="/javascripts/twitter.js" type="text/javascript"> </script>
  
    <a href="http://twitter.com/subdigital" class="twitter-follow-button" data-width="208px" data-show-count="false">Follow @subdigital</a>
  
</section>


<section>
  <h1>On Delicious</h1>
  <script type="text/javascript" src="http://feeds.delicious.com/v2/js/subdigital?title=&count=3&sort=date&extended"></script>
  <p><a href="http://delicious.com/subdigital">My Delicious Bookmarks &raquo;</a></p>
</section>



  
</aside>

    </div>
  </div>
  <footer>
<a style="display:block; float: right" title="Real Time Analytics" href="http://getclicky.com/66470389"><img alt="Real Time Analytics" src="//static.getclicky.com/media/links/badge.gif" border="0" /></a>
<script src="//static.getclicky.com/js" type="text/javascript"></script>
<script type="text/javascript">try{ clicky.init(66470389); }catch(e){}</script>
<noscript><p><img alt="Clicky" width="1" height="1" src="//in.getclicky.com/66470389ns.gif" /></p></noscript>

<p>
  Copyright &copy; 2011 - Ben Scheirman -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
</body>
</html>
